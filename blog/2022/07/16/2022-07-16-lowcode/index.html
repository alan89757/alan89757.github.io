<!DOCTYPE html>
<html lang="zh-CN">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    低代码引擎实战 | Alan的学习曲线
  </title>
  <meta name="description" content="">
  
  <meta name="keywords" content="
  低代码
  ">
  
  <meta name="author" content="Alan">

  <meta http-equiv="Cache-Control" content="no-transform"/>
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#1e2327">
  <link rel="apple-touch-icon" href="https://github.githubassets.com/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://github.githubassets.com/apple-touch-icon-180x180.png">

  <link rel="icon" type="image/x-icon" href="https://github.githubassets.com/favicon.ico">
  <link rel="stylesheet" href="/css/main.css">
  <!-- <link rel="stylesheet"
        href="/css/font-awesome.min.css"> -->
  

  

  <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script> -->
  <!-- <script src="http://localhost:4000/js/moment.min.js"></script> -->
  <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script> -->
  <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script> -->
  <script src="/js/vue.min.js"></script>
  <script src="/js/moment.min.js"></script>
<meta name="generator" content="Hexo 6.3.0"></head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <div class="navbar-search-form">
          <label for="gsc-i-id1">站内搜索</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div>
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/archives">Archives</a></li>
        
        
        <li><a href="/categories">Categories</a></li>
        
        
        <li><a href="/tags">Tags</a></li>
        
        
        <!-- <li class="desktop-only"><a href="/atom.xml" target="_blank">RSS</a></li> -->
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="/images/baracktocat.png"> <i class="fa fa-caret-down"></i></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/archives" class="header-toolbar-left"><i
                  class="fa fa-file-text"></i> Posts </a>
        <a href="/archives"
           class="header-toolbar-right"> 43 </a>
      </li>
      <li>
        <a href="/tags" class="header-toolbar-left"><i
                  class="fa fa-tags"></i> Tags </a>
        <a href="/tags"
           class="header-toolbar-right"> 50 </a>
      </li>
      <li>
        <a href="/categories" class="header-toolbar-left"><i
                  class="fa fa-folder-open"></i> Categories </a>
        <a href="/categories"
           class="header-toolbar-right"> 18 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/">Alan的学习曲线</a>
      
      
    </h2>
  </div>

  <!-- <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div> -->
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    Alan

    <span class="post-date float-right" title="{{moment(1657900800000).format('MMM DD, YYYY, h:mm:ss A')}}">
      
          <i class="fa fa-pencil-square-o"></i>
      
      {{moment(1657900800000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1>低代码引擎实战</h1>
    <p>基于 Low-Code Engine 快速打造高生产力的低代码研发平台</p>
<span id="more"></span>
<h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://lowcode-engine.cn/">https://lowcode-engine.cn/</a></p>
</blockquote>
<!-- 
介绍官网demo
https://lowcode-engine.cn/demo/index.html

顶部导航栏：

1. 支持PC/平板/手机等多平台
2. 场景支持
  (1) 基础fusion  https://fusion.design/pc/component/button?themeid=2
  (2) 基础antd组件  https://ant.design/components/button-cn/
也可以在lowcode-demo项目中查看到目前支持的场景，我们也可以新增一个场景（没实现？？？）
3. 编辑支持前进+后退
4. 保存到本地：官网demo是保存到localstorage，一会介绍案例会保存到服务端
5. 重置页面：恢复到初始化状态
6. 出码：页面配置完成可以出码的方式复制到页面
7. 预览：真正渲染的页面

 -->

<!-- 
左边导航栏：
  大纲树：展示组件树，方便选中组件，比如模态框
  组件库：封装常见组件，可分类
  数据源：没研究过，本次案例的数据是通过源码面板修改的
  源码面板：不建议在这里做过多的操作
  如何使用：使用文档
  Schema: 描述当前页面配置信息
 -->

<!-- 
  把lowcode-demo代码拉下来
  1. 建议使用cnpm

启动lowcode-demo和lowcode-express服务
  2. schema保存到服务端
    ps: 获取schema, window.AliLowCodeEngine.project.exportSchema()
  3. 
 -->



<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><h3 id="1-把低代码部署到服务端"><a href="#1-把低代码部署到服务端" class="headerlink" title="1. 把低代码部署到服务端"></a>1. 把低代码部署到服务端</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 低代码模版</span></span><br><span class="line"><span class="comment">// 1. 复制lowcode-demo的public/index.ejs到服务端</span></span><br><span class="line"><span class="comment">// 2. 以下文件替换为本地文件， 或者通过npm发包的方式，详见下面注释～</span></span><br><span class="line"><span class="comment">// &lt;link href=&quot;./css/&lt;%= scenario %&gt;.css&quot; rel=&quot;stylesheet&quot; /&gt;  - http://localhost:5556/build/css/index.css</span></span><br><span class="line"><span class="comment">// &lt;script type=&quot;text/javascript&quot; src=&quot;./js/&lt;%= scenario %&gt;.js&quot;&gt;&lt;/script&gt;  - http://localhost:5556/build/js/index.js</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/lowcode&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;index.ejs&#x27;</span>);  <span class="comment">// 使用ejs模版引擎</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<!-- 
发布npm包
# npm config set registry=http://registry.npmjs.org   // npm源指向官方源
# npm login   // 登录npm账号
# npm publish  // 发布
 -->


<h3 id="2-保存schema到服务端"><a href="#2-保存schema到服务端" class="headerlink" title="2. 保存schema到服务端"></a>2. 保存schema到服务端</h3><!-- 启动lowcode-demo和lowcode-express服务 -->
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="comment">// lowcode-demo/src/universal/utils.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveSchema</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> currentPage = <span class="string">&#x27;home&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (location.<span class="property">search</span>) &#123;</span><br><span class="line">    currentPage = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>.<span class="title function_">slice</span>(<span class="number">1</span>)).<span class="title function_">get</span>(<span class="string">&#x27;page&#x27;</span>) || <span class="string">&#x27;home&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> schema = project.<span class="title function_">exportSchema</span>();</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">&#x27;http://localhost:3000/api/v1/schemas&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> request2.<span class="title function_">post</span>(url, &#123; <span class="attr">page</span>: currentPage, schema&#125;)</span><br><span class="line">  <span class="title class_">Message</span>.<span class="title function_">success</span>(<span class="string">&#x27;成功保存&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端</span></span><br><span class="line"><span class="comment">// lowcode-express/index.js</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/v1/schemas&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; page, schema &#125; = req.<span class="property">body</span>;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fs.<span class="title function_">writeFileSync</span>(<span class="string">`./schemas/<span class="subst">$&#123;page&#125;</span>.json`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(schema))</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">data</span>: response</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-从服务器获取资产包"><a href="#3-从服务器获取资产包" class="headerlink" title="3. 从服务器获取资产包"></a>3. 从服务器获取资产包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端 伪代码</span></span><br><span class="line"><span class="comment">// src/universal/plugin.tsx</span></span><br><span class="line">- <span class="keyword">import</span> assets <span class="keyword">from</span> <span class="string">&#x27;./assets.json&#x27;</span>  <span class="comment">// 删除</span></span><br><span class="line">......</span><br><span class="line">+ <span class="keyword">const</span> assets = <span class="title function_">getAssets</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取资产包 src/universal/utils.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getAssets</span> = <span class="keyword">async</span> (<span class="params"></span>)=&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> request2.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/assets.json&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端</span></span><br><span class="line"><span class="comment">// 3. 获取资产包</span></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/assets.json&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">data</span>: assets,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-页面预览"><a href="#4-页面预览" class="headerlink" title="4. 页面预览"></a>4. 页面预览</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把lowcode-demo/public/preview.html拷贝到服务端</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/preview.html&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;preview.ejs&#x27;</span>);  <span class="comment">// 通过模板引擎渲染预览页面</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="comment">// src/preview.tsx</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; packages &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getAssets</span>(); <span class="comment">// 获取资产包信息</span></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: projectSchema &#125; = <span class="keyword">await</span> <span class="title function_">getCurrentPageSchema</span>(); <span class="comment">// 获取当前页面schema</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">componentsMap</span>: componentsMapArray, componentsTree &#125; = projectSchema;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取资产包</span></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/assets.json&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">data</span>: assets,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取页面schema</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/get-page-schema&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;req---&#x27;</span>, req.<span class="property">query</span>)</span><br><span class="line">  <span class="keyword">const</span> &#123; page &#125; = req.<span class="property">query</span>;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="built_in">require</span>(<span class="string">`./schemas/<span class="subst">$&#123;page&#125;</span>.json`</span>);</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<h3 id="5-新增面板"><a href="#5-新增面板" class="headerlink" title="5. 新增面板"></a>5. 新增面板</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/plugins/nav/index.tsx</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Nav</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@alifd/next&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Item</span> &#125; = <span class="title class_">Nav</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> queryString = location.<span class="property">search</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> defaultCurrentPage = queryString.<span class="title function_">includes</span>(<span class="string">&#x27;home&#x27;</span>) ? <span class="string">&#x27;home&#x27;</span> : <span class="string">&#x27;login&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onSelect</span> = (<span class="params">keys : string[]</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">key</span>: string = keys[<span class="number">0</span>];</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">`<span class="subst">$&#123;location.pathname&#125;</span>?page=<span class="subst">$&#123;key&#125;</span>`</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Nav</span> <span class="attr">type</span>=<span class="string">&#x27;line&#x27;</span> <span class="attr">selectedKeys</span>=<span class="string">&#123;[defaultCurrentPage]&#125;</span> <span class="attr">onSelect</span>=<span class="string">&#123;onSelect&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">key</span>=<span class="string">&#x27;home&#x27;</span> &gt;</span>首页<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">key</span>=<span class="string">&#x27;login&#x27;</span> &gt;</span>登录页<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Nav</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/universal/plugin.tsx</span></span><br><span class="line"><span class="keyword">import</span> navPage <span class="keyword">from</span> <span class="string">&#x27;src/plugins/nav/index&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// 新增导航</span></span><br><span class="line">skeleton.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">index</span>: -<span class="number">1</span>,</span><br><span class="line">  <span class="attr">area</span>: <span class="string">&#x27;leftArea&#x27;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;PanelDock&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;navPage&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: navPage,</span><br><span class="line">  <span class="attr">contentProps</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">align</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;kaiwenjianjia&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;页面导航&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="6-自定义物料"><a href="#6-自定义物料" class="headerlink" title="6. 自定义物料"></a>6. 自定义物料</h3><p>初始化物料仓库<br><code>npm init @alilc/element lowcode-material-example</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lowcode-material-example/package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;lowcode:build&quot;</span>: <span class="string">&quot;build-scripts build --config ./build.lowcode.js&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"># npm run <span class="attr">lowcode</span>:build</span><br><span class="line"># npm login  <span class="comment">// 登陆npm账号，npm源指向官方源</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发布完成后，查看资产包：<br><code>https://unpkg.com/browse/lowcode-material-example@1.1.3/build/lowcode/assets-prod.json</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端</span></span><br><span class="line"><span class="comment">// lowcode-express/schemas/assets.json</span></span><br><span class="line"><span class="comment">// 把lowcode-material-example资产包配置到schemas/assets.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;packages&quot;</span>: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 新增包信息</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;package&quot;</span>: <span class="string">&quot;lowcode-material-example&quot;</span>,</span><br><span class="line">      <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.1.3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;library&quot;</span>: <span class="string">&quot;BizComp&quot;</span>,</span><br><span class="line">      <span class="string">&quot;urls&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/render/default/view.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/render/default/view.css&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;editUrls&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/view.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/view.css&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;advancedUrls&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;default&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/render/default/view.js&quot;</span>,</span><br><span class="line">          <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/render/default/view.css&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;advancedEditUrls&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;components&quot;</span>: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 新增组件信息</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;exportName&quot;</span>: <span class="string">&quot;LowcodeMaterialExampleMeta&quot;</span>,</span><br><span class="line">      <span class="string">&quot;npm&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;package&quot;</span>: <span class="string">&quot;lowcode-material-example&quot;</span>,</span><br><span class="line">        <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.1.3&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/meta.js&quot;</span>,</span><br><span class="line">      <span class="string">&quot;urls&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;default&quot;</span>: <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/meta.js&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;advancedUrls&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;default&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;https://unpkg.com/lowcode-material-example@1.1.3/build/lowcode/meta.js&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="7-获取远程数据"><a href="#7-获取远程数据" class="headerlink" title="7. 获取远程数据"></a>7. 获取远程数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源码面板</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LowcodeComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">brands</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 品牌可选项</span></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;http://127.0.0.1:3000/api/brands&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data__&#x27;</span>, response)</span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; list = [] &#125; &#125; = response;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">          <span class="attr">brands</span>: list</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;will unmount&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">testFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test func&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">isShowDialog</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">closeDialog</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">isShowDialog</span>: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

  </article>
</div>


    




</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <div class="clearfix">
    <a href="https://alan89757.github.io" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>© 2023 Alan</li>
      <li><a href="https://alan89757.github.io">Home</a></li>
      
      <li><a target="_blank" rel="noopener" href="https://github.com/alan89757">Github</a></li>
      
    </ul>
    <!-- <div class="footer-theme-info">
      Theme <a target="_blank" rel="noopener" href="//github.com/sabrinaluo/hexo-theme-replica">Replica</a>
      by <a target="_blank" rel="noopener" href="//github.com/sabrinaluo">Alan</a> ❤ Powered by Hexo
    </div> -->
    </div>
    
  </footer>
</div>


<script>
  (function() {
    var cx = 'true';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>



<script src="/js/main.js"></script>

</body>
</html>
